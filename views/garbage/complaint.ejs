<% layout("./layouts/biolerplate") %>
<body class="bg-light">
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-6">
        <div class="card shadow-lg rounded-3 border-0">
          <div class="card-body p-4">
            <h3 class="text-center mb-4 text-primary fw-bold">Garbage Complaint Form</h3>

            <form action="/complaints/add" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
              
              <!-- Garbage Type -->
              <div class="mb-3">
                <label for="garbageType" class="form-label fw-semibold">Garbage Type</label>
                <select name="Garbage[garbageType]" id="garbageType" class="form-select" required>
                  <option value="">-- Select Type --</option>
                  <option value="dry">Dry</option>
                  <option value="water">Water</option>
                  <option value="mix">Mix</option>
                </select>
                <div class="invalid-feedback">Please select a garbage type.</div>
              </div>

              <!-- Description -->
              <div class="mb-3">
                <label for="Description" class="form-label fw-semibold">Description</label>
                <textarea rows="4" class="form-control" name="Garbage[description]" placeholder="Info about garbage" id="Description" required></textarea>
                <div class="invalid-feedback">Please provide a description.</div>
              </div>

              <!-- Image Upload -->
              <div class="mb-3">
                <label for="image" class="form-label fw-semibold">Upload Image</label>
                <input type="file" class="form-control" name="Garbage[image]" id="image" accept="image/*" required>
                <div class="invalid-feedback">Please upload an image.</div>
                <img id="preview" class="mt-2" style="max-width: 100%; display:none;" />
              </div>

              <!-- Location -->
              <div class="mb-3">
                <label for="Address" class="form-label fw-semibold">Location</label>
                <input type="text" class="form-control" name="Garbage[address]" id="Address" placeholder="Enter location" required>
                <div class="invalid-feedback">Please enter the location.</div>
              </div>

              <!-- Submit -->
              <div class="d-grid">
                <button type="submit" class="btn btn-primary btn-lg">Submit Complaint</button>
              </div>
            </form>

          </div>
        </div>
      </div>
    </div>
  </div>

  
 
  <!-- Image preview script -->
  <script>
    const imageInput = document.getElementById('image');
    const preview = document.getElementById('preview');

    imageInput.addEventListener('change', function() {
      const file = this.files[0];
      if(file){
        const reader = new FileReader();
        reader.onload = function(e){
          preview.src = e.target.result;
          preview.style.display = 'block';
        }
        reader.readAsDataURL(file);
      }
    });
  </script>
</body>
